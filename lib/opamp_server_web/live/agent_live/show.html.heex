<.header>
  Agent <%= @agent.id %>
  <:subtitle>This is a agent record from your database.</:subtitle>
  <:actions>
    <.link patch={~p"/agent/#{@agent}/show/edit"} phx-click={JS.push_focus()}>
      <.button>Edit agent</.button>
    </.link>
  </:actions>
</.header>

<h1 title="Instance ID"><%= @agent.instance_id %></h1>

<.simple_form for={@form} phx-change="validate" phx-submit="save">
  <.input field={@form[:effective_config]} type="textarea" />
  <:actions>
    <.button>Save</.button>
  </:actions>
</.simple_form>

<.back navigate={~p"/agent"}>Back to agent</.back>

<.modal :if={@live_action == :edit} id="agent-modal" show on_cancel={JS.patch(~p"/agent/#{@agent}")}>
  <.live_component
    module={OpAMPServerWeb.AgentLive.FormComponent}
    id={@agent.id}
    title={@page_title}
    action={@live_action}
    agent={@agent}
    patch={~p"/agent/#{@agent}"}
  />
</.modal>
